% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/error.R
\name{cnd}
\alias{cnd}
\alias{caller_arg}
\alias{as_caller_arg}
\alias{as.character.ts_caller_arg}
\alias{caller_env}
\alias{check_named_arg}
\alias{ts_parse_error_cnd}
\title{Utility functions for ts language implementations}
\usage{
cnd(..., class = NULL, call = caller_env(), .envir = parent.frame())

caller_arg(arg)

as_caller_arg(x)

\method{as.character}{ts_caller_arg}(x, ...)

caller_env(n = 1)

check_named_arg(arg, frame = -1)

ts_parse_error_cnd(tree, text, call = caller_env())
}
\arguments{
\item{...}{Arguments collapsed and interpolated into a condition message.}

\item{class}{A character vector of classes for the condition.}

\item{call}{Environment of the call to associate with the error
condition, defaults to the caller's environment.}

\item{.envir}{The environment in which to evaluate the \code{...} expressions,
defaults to the parent frame.}

\item{arg}{Argument to check.}

\item{x}{A ts_caller_arg object.}

\item{n}{Number of frames to go up to find the caller environment.}

\item{frame}{Frame number to inspect, defaults to the caller's frame.}

\item{tree}{A \code{ts_tree} object as returned by \code{\link[=ts_tree_read]{ts_tree_read()}}.}

\item{text}{Raw vector, the original text used to parse the tree.}
}
\value{
\code{cnd()} returns an error condition object.

\code{caller_arg()} returns the captured expression as a
ts_caller_arg object.

\code{as_caller_arg()} returns a ts_caller_arg object.

\code{as.character.ts_caller_arg()} returns a short string
representation of the caller argument, a character scalar.

\code{caller_env()} returns an environment, or \code{NULL} is called
from the global environment.

\code{check_named_arg()} returns \code{TRUE} invisibly if the argument
was named, otherwise it raises an error.

\code{ts_parse_error_cnd()} returns a ts_parse_error condition
}
\description{
It is unlikely that you will need to use these functions directly, except
when implementing a new language for the ts package.
}
\details{
\code{cnd()} creates a condition object. It interpolates its
arguments into a single message.

\code{caller_arg()} captures the expression used as an argument
to a function, for use in error messages.

\code{as_caller_arg()} converts an object into a caller argument
object. This is useful when referring to parts of the caller argument
in downstream error messages.

\code{as.character.ts_caller_arg()} formats a caller argument
object as a short string for use in error messages. Multi-line
expressions are truncated after the first line.

\code{caller_env()} returns the environment of the caller function,
\code{n} levels up the call stack. This is useful for associating error
conditions with the correct call.

\code{check_named_arg()} checks whether an argument was supplied
with a name. If not, it raises an error.

\code{ts_parse_error_cnd()} creates a parse error condition
associated with a \code{ts_tree} object and the original text.
The error message includes information about the location of
parse errors in the text. It also has \code{format()} and \code{print()}
methods to display the error together with the relevant lines
of the original text.
}
