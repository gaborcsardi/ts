[{"path":"https://gaborcsardi.github.io/ts/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 ts authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://gaborcsardi.github.io/ts/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gábor Csárdi. Author, maintainer. . Copyright holder, funder.","code":""},{"path":"https://gaborcsardi.github.io/ts/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Csárdi G (2026). ts: Tree-Sitter Parsing Tools. R package version 0.0.0.9000, https://github.com/gaborcsardi/ts.","code":"@Manual{,   title = {ts: Tree-Sitter Parsing Tools},   author = {Gábor Csárdi},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/gaborcsardi/ts}, }"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"ts","dir":"","previous_headings":"","what":"Tree-Sitter Parsing Tools","title":"Tree-Sitter Parsing Tools","text":"Common tree-sitter parsing tools R. ts common interface tree-sitter parsers, implemented R packages. common API query, edit, format, unserialize tree-sitter parse trees.","code":""},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tree-Sitter Parsing Tools","text":"can install development version ts GitHub :","code":"# install.packages(\"pak\") pak::pak(\"gaborcsardi/ts\")"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Tree-Sitter Parsing Tools","text":"See https://gaborcsardi.github.io/ts/ also installed package: help(package = \"ts\").","code":""},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"parsers-that-use-ts","dir":"","previous_headings":"","what":"Parsers that use ts","title":"Tree-Sitter Parsing Tools","text":"JSONC (JSON comments trailing commas): tsjsonc. TOML: tstoml.","code":""},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"quickstart","dir":"","previous_headings":"","what":"Quickstart","title":"Tree-Sitter Parsing Tools","text":"document show examples tsjsonc package.","code":""},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"create-a-tree-sitter-tree","dir":"","previous_headings":"Quickstart","what":"Create a tree-sitter tree","title":"Tree-Sitter Parsing Tools","text":"Create ts_tree (ts_tree_jsonc) object string: Pretty print ts_tree object:","code":"txt <- r\"( // this is a comment {   \"a\": {     \"a1\": [1, 2, 3],     // comment     \"a2\": \"string\"   },   \"b\": [     {       \"b11\": true,       \"b12\": false     },     {       \"b21\": false,       \"b22\": false     }   ] } )\"  json <- tsjsonc::ts_parse_jsonc(txt) json #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [1, 2, 3], #>  6 |     // comment #>  7 |     \"a2\": \"string\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"select-nodes-of-a-tree","dir":"","previous_headings":"Quickstart","what":"Select nodes of a tree","title":"Tree-Sitter Parsing Tools","text":"Selecting nodes basis editing querying tree-sitter trees. Select element objects key: Select element inside element: Select element(s) array: Select multiple keys object: Select nodes match tree-sitter query:","code":"ts_tree_select(json, \"a\") #> # jsonc (19 lines, 1 selected element) #>    1  |  #>    2  | // this is a comment #>    3  | { #> >  4  |   \"a\": { #> >  5  |     \"a1\": [1, 2, 3], #> >  6  |     // comment #> >  7  |     \"a2\": \"string\" #> >  8  |   }, #>    9  |   \"b\": [ #>   10  |     { #>   11  |       \"b11\": true, #>   ... ts_tree_select(json, \"a\", \"a1\") #> # jsonc (19 lines, 1 selected element) #>   2   | // this is a comment #>   3   | { #>   4   |   \"a\": { #> > 5   |     \"a1\": [1, 2, 3], #>   6   |     // comment #>   7   |     \"a2\": \"string\" #>   8   |   }, #>   ... ts_tree_select(json, \"a\", \"a1\", 1:2) #> # jsonc (19 lines, 2 selected elements) #>   2   | // this is a comment #>   3   | { #>   4   |   \"a\": { #> > 5   |     \"a1\": [1, 2, 3], #>   6   |     // comment #>   7   |     \"a2\": \"string\" #>   8   |   }, #>   ... ts_tree_select(json, \"a\", c(\"a1\", \"a2\")) #> # jsonc (19 lines, 2 selected elements) #>    2  | // this is a comment #>    3  | { #>    4  |   \"a\": { #> >  5  |     \"a1\": [1, 2, 3], #>    6  |     // comment #> >  7  |     \"a2\": \"string\" #>    8  |   }, #>    9  |   \"b\": [ #>   10  |     { #>   ... json |> ts_tree_select(query = \"((pair value: (false) @val))\") #> # jsonc (19 lines, 3 selected elements) #>   ... #>    9  |   \"b\": [ #>   10  |     { #>   11  |       \"b11\": true, #> > 12  |       \"b12\": false #>   13  |     }, #>   14  |     { #> > 15  |       \"b21\": false, #> > 16  |       \"b22\": false #>   17  |     } #>   18  |   ] #>   19  | }"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"delete-elements","dir":"","previous_headings":"Quickstart","what":"Delete elements","title":"Tree-Sitter Parsing Tools","text":"Delete selected elements:","code":"ts_tree_select(json, \"a\", \"a1\") |> ts_tree_delete() #> # jsonc (18 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     // comment #>  6 |     \"a2\": \"string\" #>  7 |   }, #>  8 |   \"b\": [ #>  9 |     { #> 10 |       \"b11\": true, #> ℹ 8 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"insert-elements","dir":"","previous_headings":"Quickstart","what":"Insert elements","title":"Tree-Sitter Parsing Tools","text":"Insert element array: Inserting array reformats array. Insert element object, specified key:","code":"ts_tree_select(json, \"a\", \"a1\") |> ts_tree_insert(at = 2, \"new\") #> # jsonc (24 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [ #>  6 |         1, #>  7 |         2, #>  8 |         \"new\", #>  9 |         3 #> 10 |     ], #> ℹ 14 more lines #> ℹ Use `print(n = ...)` to see more lines ts_tree_select(json, \"a\") |>   ts_tree_insert(key = \"a0\", at = 0, list(\"new\", \"element\")) #> # jsonc (27 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |       \"a0\": [ #>  6 |           \"new\", #>  7 |           \"element\" #>  8 |       ], #>  9 |       \"a1\": [ #> 10 |           1, #> ℹ 17 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"update-elements","dir":"","previous_headings":"Quickstart","what":"Update elements","title":"Tree-Sitter Parsing Tools","text":"Update existing element: Inserts element parents missing:","code":"ts_tree_select(json, \"a\", c(\"a1\", \"a2\")) |> ts_tree_update(\"new value\") #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": \"new value\", #>  6 |     // comment #>  7 |     \"a2\": \"new value\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines json <- ts_parse_jsonc(text = \"{ \\\"a\\\": { \\\"b\\\": true } }\") json #> Error in ts_parse_jsonc(text = \"{ \\\"a\\\": { \\\"b\\\": true } }\") : #>   could not find function \"ts_parse_jsonc\" #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [1, 2, 3], #>  6 |     // comment #>  7 |     \"a2\": \"string\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines ts_tree_select(json, \"a\", \"x\", \"y\") |> ts_tree_update(list(1,2,3)) #> # jsonc (30 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |       \"a1\": [ #>  6 |           1, #>  7 |           2, #>  8 |           3 #>  9 |       ], #> 10 |       // comment #> ℹ 20 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"write-out-a-document","dir":"","previous_headings":"Quickstart","what":"Write out a document","title":"Tree-Sitter Parsing Tools","text":"Use stdout() write screen instread file:","code":"json |> ts_tree_write(stdout()) #> #> // this is a comment #> { #>   \"a\": { #>     \"a1\": [1, 2, 3], #>     // comment #>     \"a2\": \"string\" #>   }, #>   \"b\": [ #>     { #>       \"b11\": true, #>       \"b12\": false #>     }, #>     { #>       \"b21\": false, #>       \"b22\": false #>     } #>   ] #> }"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"formatting","dir":"","previous_headings":"Quickstart","what":"Formatting","title":"Tree-Sitter Parsing Tools","text":"Format whole document: Format part document:","code":"json |> ts_tree_format() #> # jsonc (23 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |     \"a\": { #>  5 |         \"a1\": [ #>  6 |             1, #>  7 |             2, #>  8 |             3 #>  9 |         ], #> 10 |         // comment #> ℹ 13 more lines #> ℹ Use `print(n = ...)` to see more lines json |> ts_tree_select(\"a\") |>   ts_tree_format(options = list(format = \"compact\")) #> # jsonc (15 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": {\"a1\":[1,2,3],\"a2\":\"string\"}, #>  5 |   \"b\": [ #>  6 |     { #>  7 |       \"b11\": true, #>  8 |       \"b12\": false #>  9 |     }, #> 10 |     { #> ℹ 5 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"unserializing","dir":"","previous_headings":"Quickstart","what":"Unserializing","title":"Tree-Sitter Parsing Tools","text":"Unserialize whole document: Note ts_tree_unserialize() always returns list, first element list unserialized document. Unserialize part(s) document: , ts_tree_unserialize() returns list, one element selected node.","code":"json |> ts_tree_unserialize() #> [[1]] #> [[1]]$a #> [[1]]$a$a1 #> [[1]]$a$a1[[1]] #> [1] 1 #> #> [[1]]$a$a1[[2]] #> [1] 2 #> #> [[1]]$a$a1[[3]] #> [1] 3 #> #> #> [[1]]$a$a2 #> [1] \"string\" #> #> #> [[1]]$b #> [[1]]$b[[1]] #> [[1]]$b[[1]]$b11 #> [1] TRUE #> #> [[1]]$b[[1]]$b12 #> [1] FALSE #> #> #> [[1]]$b[[2]] #> [[1]]$b[[2]]$b21 #> [1] FALSE #> #> [[1]]$b[[2]]$b22 #> [1] FALSE #> #> #> #> json |> ts_tree_select(\"b\") |> ts_tree_unserialize() #> [[1]] #> [[1]][[1]] #> [[1]][[1]]$b11 #> [1] TRUE #> #> [[1]][[1]]$b12 #> [1] FALSE #> #> #> [[1]][[2]] #> [[1]][[2]]$b21 #> [1] FALSE #> #> [[1]][[2]]$b22 #> [1] FALSE #> #> #>"},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"exploring-a-tree-sitter-tree","dir":"","previous_headings":"Quickstart","what":"Exploring a tree-sitter tree","title":"Tree-Sitter Parsing Tools","text":"often useful explore structure (JSONC) tree-sitter tree, help writing right selection tree-sitter queries. Print annotated syntax tree: Print document object model: Print structural summary tree:","code":"ts_tree_ast(json) #> document (1)                          2| #> ├─comment (2)                          |// this is a comment #> └─object (3)                          3| #>   ├─{ (4)                              |{ #>   ├─pair (5)                          4| #>   │ ├─string (6)                       | #>   │ │ ├─\" (7)                          |  \" #>   │ │ ├─string_content (8)             |   a #>   │ │ └─\" (9)                          |    \" #>   │ ├─: (10)                           |     : #>   │ └─object (11)                      | #>   │   ├─{ (12)                         |       { #>   │   ├─pair (13)                     5| #>   │   │ ├─string (14)                  | #>   │   │ │ ├─\" (15)                     |    \" #>   │   │ │ ├─string_content (16)        |     a1 #>   │   │ │ └─\" (17)                     |       \" #>   │   │ ├─: (18)                       |        : #>   │   │ └─array (19)                   | #>   │   │   ├─[ (20)                     |          [ #>   │   │   ├─number (21)                |           1 #>   │   │   ├─, (22)                     |            , #>   │   │   ├─number (23)                |              2 #>   │   │   ├─, (24)                     |               , #>   │   │   ├─number (25)                |                 3 #>   │   │   └─] (26)                     |                  ] #>   │   ├─, (27)                         |                   , #>   │   ├─comment (28)                  6|    // comment #>   │   ├─pair (29)                     7| #>   │   │ ├─string (30)                  | #>   │   │ │ ├─\" (31)                     |    \" #>   │   │ │ ├─string_content (32)        |     a2 #>   │   │ │ └─\" (33)                     |       \" #>   │   │ ├─: (34)                       |        : #>   │   │ └─string (35)                  | #>   │   │   ├─\" (36)                     |          \" #>   │   │   ├─string_content (37)        |           string #>   │   │   └─\" (38)                     |                 \" #>   │   └─} (39)                        8|  } #>   ├─, (40)                             |   , #>   ├─pair (41)                         9| #>   │ ├─string (42)                      | #>   │ │ ├─\" (43)                         |  \" #>   │ │ ├─string_content (44)            |   b #>   │ │ └─\" (45)                         |    \" #>   │ ├─: (46)                           |     : #>   │ └─array (47)                       | #>   │   ├─[ (48)                         |       [ #>   │   ├─object (49)                  10| #>   │   │ ├─{ (50)                       |    { #>   │   │ ├─pair (51)                  11| #>   │   │ │ ├─string (52)                | #>   │   │ │ │ ├─\" (53)                   |      \" #>   │   │ │ │ ├─string_content (54)      |       b11 #>   │   │ │ │ └─\" (55)                   |          \" #>   │   │ │ ├─: (56)                     |           : #>   │   │ │ └─true (57)                  |             true #>   │   │ ├─, (58)                       |                 , #>   │   │ ├─pair (59)                  12| #>   │   │ │ ├─string (60)                | #>   │   │ │ │ ├─\" (61)                   |      \" #>   │   │ │ │ ├─string_content (62)      |       b12 #>   │   │ │ │ └─\" (63)                   |          \" #>   │   │ │ ├─: (64)                     |           : #>   │   │ │ └─false (65)                 |             false #>   │   │ └─} (66)                     13|    } #>   │   ├─, (67)                         |     , #>   │   ├─object (68)                  14| #>   │   │ ├─{ (69)                       |    { #>   │   │ ├─pair (70)                  15| #>   │   │ │ ├─string (71)                | #>   │   │ │ │ ├─\" (72)                   |      \" #>   │   │ │ │ ├─string_content (73)      |       b21 #>   │   │ │ │ └─\" (74)                   |          \" #>   │   │ │ ├─: (75)                     |           : #>   │   │ │ └─false (76)                 |             false #>   │   │ ├─, (77)                       |                  , #>   │   │ ├─pair (78)                  16| #>   │   │ │ ├─string (79)                | #>   │   │ │ │ ├─\" (80)                   |      \" #>   │   │ │ │ ├─string_content (81)      |       b22 #>   │   │ │ │ └─\" (82)                   |          \" #>   │   │ │ ├─: (83)                     |           : #>   │   │ │ └─false (84)                 |             false #>   │   │ └─} (85)                     17|    } #>   │   └─] (86)                       18|  ] #>   └─} (87)                           19|} ts_tree_dom(json) #> document (1) #> └─object (3) #>   ├─object (11) # a #>   │ ├─array (19) # a1 #>   │ │ ├─number (21) #>   │ │ ├─number (23) #>   │ │ └─number (25) #>   │ └─string (35) # a2 #>   └─array (47) # b #>     ├─object (49) #>     │ ├─true (57) # b11 #>     │ └─false (65) # b12 #>     └─object (68) #>       ├─false (76) # b21 #>       └─false (84) # b22 ts_tree_sexpr(json) #> [1] \"(document (comment) (object (pair key: (string (string_content)) value: (ob #> ject (pair key: (string (string_content)) value: (array (number) (number) (numbe #> r))) (comment) (pair key: (string (string_content)) value: (string (string_conte #> nt))))) (pair key: (string (string_content)) value: (array (object (pair key: (s #> tring (string_content)) value: (true)) (pair key: (string (string_content)) valu #> e: (false))) (object (pair key: (string (string_content)) value: (false)) (pair #> key: (string (string_content)) value: (false)))))))\""},{"path":"https://gaborcsardi.github.io/ts/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Tree-Sitter Parsing Tools","text":"MIT © Posit Software, PBC","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":null,"dir":"Reference","previous_headings":"","what":"About ts — about","title":"About ts — about","text":"ts common interface tree-sitter parsers, implemented R packages. common API query, edit, format, unserialize tree-sitter parse trees.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"About ts — about","text":"document show examples tsjsonc package.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"create-a-tree-sitter-tree","dir":"Reference","previous_headings":"","what":"Create a tree-sitter tree","title":"About ts — about","text":"Create ts_tree (ts_tree_jsonc) object string:   Pretty print ts_tree object:","code":"txt <- r\"( // this is a comment {   \"a\": {     \"a1\": [1, 2, 3],     // comment     \"a2\": \"string\"   },   \"b\": [     {       \"b11\": true,       \"b12\": false     },     {       \"b21\": false,       \"b22\": false     }   ] } )\"  json <- tsjsonc::ts_parse_jsonc(txt) json #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [1, 2, 3], #>  6 |     // comment #>  7 |     \"a2\": \"string\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"select-nodes-of-a-tree","dir":"Reference","previous_headings":"","what":"Select nodes of a tree","title":"About ts — about","text":"Selecting nodes basis editing querying tree-sitter trees. Select element objects key:   Select element inside element:   Select element(s) array:   Select multiple keys object:   Select nodes match tree-sitter query:","code":"ts_tree_select(json, \"a\") #> # jsonc (19 lines, 1 selected element) #>    1  |  #>    2  | // this is a comment #>    3  | { #> >  4  |   \"a\": { #> >  5  |     \"a1\": [1, 2, 3], #> >  6  |     // comment #> >  7  |     \"a2\": \"string\" #> >  8  |   }, #>    9  |   \"b\": [ #>   10  |     { #>   11  |       \"b11\": true, #>   ... ts_tree_select(json, \"a\", \"a1\") #> # jsonc (19 lines, 1 selected element) #>   2   | // this is a comment #>   3   | { #>   4   |   \"a\": { #> > 5   |     \"a1\": [1, 2, 3], #>   6   |     // comment #>   7   |     \"a2\": \"string\" #>   8   |   }, #>   ... ts_tree_select(json, \"a\", \"a1\", 1:2) #> # jsonc (19 lines, 2 selected elements) #>   2   | // this is a comment #>   3   | { #>   4   |   \"a\": { #> > 5   |     \"a1\": [1, 2, 3], #>   6   |     // comment #>   7   |     \"a2\": \"string\" #>   8   |   }, #>   ... ts_tree_select(json, \"a\", c(\"a1\", \"a2\")) #> # jsonc (19 lines, 2 selected elements) #>    2  | // this is a comment #>    3  | { #>    4  |   \"a\": { #> >  5  |     \"a1\": [1, 2, 3], #>    6  |     // comment #> >  7  |     \"a2\": \"string\" #>    8  |   }, #>    9  |   \"b\": [ #>   10  |     { #>   ... json |> ts_tree_select(query = \"((pair value: (false) @val))\") #> # jsonc (19 lines, 3 selected elements) #>   ... #>    9  |   \"b\": [ #>   10  |     { #>   11  |       \"b11\": true, #> > 12  |       \"b12\": false #>   13  |     }, #>   14  |     { #> > 15  |       \"b21\": false, #> > 16  |       \"b22\": false #>   17  |     } #>   18  |   ] #>   19  | }"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"delete-elements","dir":"Reference","previous_headings":"","what":"Delete elements","title":"About ts — about","text":"Delete selected elements:","code":"ts_tree_select(json, \"a\", \"a1\") |> ts_tree_delete() #> # jsonc (18 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     // comment #>  6 |     \"a2\": \"string\" #>  7 |   }, #>  8 |   \"b\": [ #>  9 |     { #> 10 |       \"b11\": true, #> ℹ 8 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"insert-elements","dir":"Reference","previous_headings":"","what":"Insert elements","title":"About ts — about","text":"Insert element array:   Inserting array reformats array. Insert element object, specified key:","code":"ts_tree_select(json, \"a\", \"a1\") |> ts_tree_insert(at = 2, \"new\") #> # jsonc (24 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [ #>  6 |         1, #>  7 |         2, #>  8 |         \"new\", #>  9 |         3 #> 10 |     ], #> ℹ 14 more lines #> ℹ Use `print(n = ...)` to see more lines ts_tree_select(json, \"a\") |>   ts_tree_insert(key = \"a0\", at = 0, list(\"new\", \"element\")) #> # jsonc (27 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |       \"a0\": [ #>  6 |           \"new\", #>  7 |           \"element\" #>  8 |       ], #>  9 |       \"a1\": [ #> 10 |           1, #> ℹ 17 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"update-elements","dir":"Reference","previous_headings":"","what":"Update elements","title":"About ts — about","text":"Update existing element:   Inserts element parents missing:","code":"ts_tree_select(json, \"a\", c(\"a1\", \"a2\")) |> ts_tree_update(\"new value\") #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": \"new value\", #>  6 |     // comment #>  7 |     \"a2\": \"new value\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines json <- ts_parse_jsonc(text = \"{ \\\"a\\\": { \\\"b\\\": true } }\") json #> Error in ts_parse_jsonc(text = \"{ \\\"a\\\": { \\\"b\\\": true } }\") : #>   could not find function \"ts_parse_jsonc\" #> # jsonc (19 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |     \"a1\": [1, 2, 3], #>  6 |     // comment #>  7 |     \"a2\": \"string\" #>  8 |   }, #>  9 |   \"b\": [ #> 10 |     { #> ℹ 9 more lines #> ℹ Use `print(n = ...)` to see more lines ts_tree_select(json, \"a\", \"x\", \"y\") |> ts_tree_update(list(1,2,3)) #> # jsonc (30 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": { #>  5 |       \"a1\": [ #>  6 |           1, #>  7 |           2, #>  8 |           3 #>  9 |       ], #> 10 |       // comment #> ℹ 20 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"write-out-a-document","dir":"Reference","previous_headings":"","what":"Write out a document","title":"About ts — about","text":"Use stdout() write screen instread file:","code":"json |> ts_tree_write(stdout()) #> #> // this is a comment #> { #>   \"a\": { #>     \"a1\": [1, 2, 3], #>     // comment #>     \"a2\": \"string\" #>   }, #>   \"b\": [ #>     { #>       \"b11\": true, #>       \"b12\": false #>     }, #>     { #>       \"b21\": false, #>       \"b22\": false #>     } #>   ] #> }"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"formatting","dir":"Reference","previous_headings":"","what":"Formatting","title":"About ts — about","text":"Format whole document:   Format part document:","code":"json |> ts_tree_format() #> # jsonc (23 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |     \"a\": { #>  5 |         \"a1\": [ #>  6 |             1, #>  7 |             2, #>  8 |             3 #>  9 |         ], #> 10 |         // comment #> ℹ 13 more lines #> ℹ Use `print(n = ...)` to see more lines json |> ts_tree_select(\"a\") |>   ts_tree_format(options = list(format = \"compact\")) #> # jsonc (15 lines) #>  1 |  #>  2 | // this is a comment #>  3 | { #>  4 |   \"a\": {\"a1\":[1,2,3],\"a2\":\"string\"}, #>  5 |   \"b\": [ #>  6 |     { #>  7 |       \"b11\": true, #>  8 |       \"b12\": false #>  9 |     }, #> 10 |     { #> ℹ 5 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"unserializing","dir":"Reference","previous_headings":"","what":"Unserializing","title":"About ts — about","text":"Unserialize whole document:   Note ts_tree_unserialize() always returns list, first element list unserialized document. Unserialize part(s) document:   , ts_tree_unserialize() returns list, one element selected node.","code":"json |> ts_tree_unserialize() #> [[1]] #> [[1]]$a #> [[1]]$a$a1 #> [[1]]$a$a1[[1]] #> [1] 1 #> #> [[1]]$a$a1[[2]] #> [1] 2 #> #> [[1]]$a$a1[[3]] #> [1] 3 #> #> #> [[1]]$a$a2 #> [1] \"string\" #> #> #> [[1]]$b #> [[1]]$b[[1]] #> [[1]]$b[[1]]$b11 #> [1] TRUE #> #> [[1]]$b[[1]]$b12 #> [1] FALSE #> #> #> [[1]]$b[[2]] #> [[1]]$b[[2]]$b21 #> [1] FALSE #> #> [[1]]$b[[2]]$b22 #> [1] FALSE #> #> #> #> json |> ts_tree_select(\"b\") |> ts_tree_unserialize() #> [[1]] #> [[1]][[1]] #> [[1]][[1]]$b11 #> [1] TRUE #> #> [[1]][[1]]$b12 #> [1] FALSE #> #> #> [[1]][[2]] #> [[1]][[2]]$b21 #> [1] FALSE #> #> [[1]][[2]]$b22 #> [1] FALSE #> #> #>"},{"path":"https://gaborcsardi.github.io/ts/reference/about.html","id":"exploring-a-tree-sitter-tree","dir":"Reference","previous_headings":"","what":"Exploring a tree-sitter tree","title":"About ts — about","text":"often useful explore structure (JSONC) tree-sitter tree, help writing right selection tree-sitter queries. Print annotated syntax tree:   Print document object model:   Print structural summary tree:","code":"ts_tree_ast(json) #> document (1)                          2| #> ├─comment (2)                          |// this is a comment #> └─object (3)                          3| #>   ├─{ (4)                              |{ #>   ├─pair (5)                          4| #>   │ ├─string (6)                       | #>   │ │ ├─\" (7)                          |  \" #>   │ │ ├─string_content (8)             |   a #>   │ │ └─\" (9)                          |    \" #>   │ ├─: (10)                           |     : #>   │ └─object (11)                      | #>   │   ├─{ (12)                         |       { #>   │   ├─pair (13)                     5| #>   │   │ ├─string (14)                  | #>   │   │ │ ├─\" (15)                     |    \" #>   │   │ │ ├─string_content (16)        |     a1 #>   │   │ │ └─\" (17)                     |       \" #>   │   │ ├─: (18)                       |        : #>   │   │ └─array (19)                   | #>   │   │   ├─[ (20)                     |          [ #>   │   │   ├─number (21)                |           1 #>   │   │   ├─, (22)                     |            , #>   │   │   ├─number (23)                |              2 #>   │   │   ├─, (24)                     |               , #>   │   │   ├─number (25)                |                 3 #>   │   │   └─] (26)                     |                  ] #>   │   ├─, (27)                         |                   , #>   │   ├─comment (28)                  6|    // comment #>   │   ├─pair (29)                     7| #>   │   │ ├─string (30)                  | #>   │   │ │ ├─\" (31)                     |    \" #>   │   │ │ ├─string_content (32)        |     a2 #>   │   │ │ └─\" (33)                     |       \" #>   │   │ ├─: (34)                       |        : #>   │   │ └─string (35)                  | #>   │   │   ├─\" (36)                     |          \" #>   │   │   ├─string_content (37)        |           string #>   │   │   └─\" (38)                     |                 \" #>   │   └─} (39)                        8|  } #>   ├─, (40)                             |   , #>   ├─pair (41)                         9| #>   │ ├─string (42)                      | #>   │ │ ├─\" (43)                         |  \" #>   │ │ ├─string_content (44)            |   b #>   │ │ └─\" (45)                         |    \" #>   │ ├─: (46)                           |     : #>   │ └─array (47)                       | #>   │   ├─[ (48)                         |       [ #>   │   ├─object (49)                  10| #>   │   │ ├─{ (50)                       |    { #>   │   │ ├─pair (51)                  11| #>   │   │ │ ├─string (52)                | #>   │   │ │ │ ├─\" (53)                   |      \" #>   │   │ │ │ ├─string_content (54)      |       b11 #>   │   │ │ │ └─\" (55)                   |          \" #>   │   │ │ ├─: (56)                     |           : #>   │   │ │ └─true (57)                  |             true #>   │   │ ├─, (58)                       |                 , #>   │   │ ├─pair (59)                  12| #>   │   │ │ ├─string (60)                | #>   │   │ │ │ ├─\" (61)                   |      \" #>   │   │ │ │ ├─string_content (62)      |       b12 #>   │   │ │ │ └─\" (63)                   |          \" #>   │   │ │ ├─: (64)                     |           : #>   │   │ │ └─false (65)                 |             false #>   │   │ └─} (66)                     13|    } #>   │   ├─, (67)                         |     , #>   │   ├─object (68)                  14| #>   │   │ ├─{ (69)                       |    { #>   │   │ ├─pair (70)                  15| #>   │   │ │ ├─string (71)                | #>   │   │ │ │ ├─\" (72)                   |      \" #>   │   │ │ │ ├─string_content (73)      |       b21 #>   │   │ │ │ └─\" (74)                   |          \" #>   │   │ │ ├─: (75)                     |           : #>   │   │ │ └─false (76)                 |             false #>   │   │ ├─, (77)                       |                  , #>   │   │ ├─pair (78)                  16| #>   │   │ │ ├─string (79)                | #>   │   │ │ │ ├─\" (80)                   |      \" #>   │   │ │ │ ├─string_content (81)      |       b22 #>   │   │ │ │ └─\" (82)                   |          \" #>   │   │ │ ├─: (83)                     |           : #>   │   │ │ └─false (84)                 |             false #>   │   │ └─} (85)                     17|    } #>   │   └─] (86)                       18|  ] #>   └─} (87)                           19|} ts_tree_dom(json) #> document (1) #> └─object (3) #>   ├─object (11) # a #>   │ ├─array (19) # a1 #>   │ │ ├─number (21) #>   │ │ ├─number (23) #>   │ │ └─number (25) #>   │ └─string (35) # a2 #>   └─array (47) # b #>     ├─object (49) #>     │ ├─true (57) # b11 #>     │ └─false (65) # b12 #>     └─object (68) #>       ├─false (76) # b21 #>       └─false (84) # b22 ts_tree_sexpr(json) #> [1] \"(document (comment) (object (pair key: (string (string_content)) value: (ob #> ject (pair key: (string (string_content)) value: (array (number) (number) (numbe #> r))) (comment) (pair key: (string (string_content)) value: (string (string_conte #> nt))))) (pair key: (string (string_content)) value: (array (object (pair key: (s #> tring (string_content)) value: (true)) (pair key: (string (string_content)) valu #> e: (false))) (object (pair key: (string (string_content)) value: (false)) (pair #> key: (string (string_content)) value: (false)))))))\""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":null,"dir":"Reference","previous_headings":"","what":"Edit parts of a tree-sitter tree — [[<-.ts_tree","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"[[<- operator works similarly combination ts_tree_select() ts_tree_update(), (also replacement function ts_tree_select<-()), might readable.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"","code":"# S3 method for class 'ts_tree' x[[i]] <- value"},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"x ts_tree object. list selection expressions, see ts_tree_select() details. value R expression serialize ts_tree_deleted().","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"modified ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"following two expressions equivalent:    ","code":"tree <- ts_tree_select(tree, <selectors>) |> ts_tree_update(value) tree[[list(<selectors>)]] <- value"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-set-ts-tree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Edit parts of a tree-sitter tree — [[<-.ts_tree","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}')  tree #> # jsonc (1 line) #> 1 | {\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}  tree[[list(\"a\")]] <- 42 tree[[list(\"b\", -1)]] <- ts_tree_deleted()  tree #> # jsonc (1 line) #> 1 | {\"a\": 42, \"b\": [1, 2], \"c\": \"x\"}"},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":null,"dir":"Reference","previous_headings":"","what":"Unserialize parts of a tree-sitter tree — [[.ts_tree","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"[[ operator works similarly combination ts_tree_select() ts_tree_unserialize(), might readable.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"","code":"# S3 method for class 'ts_tree' x[[i, ...]]"},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"x ts_tree object. Selection expressions list, see details ts_tree_select(). ... Additional arguments, passed ts_tree_select().","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"following two expressions equivalent:             ","code":"ts_tree_select(tree, <selectors>) |> ts_tree_unserialize() tree[[list(<selectors>)]] json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json[[list(\"b\", 1)]] #> [[1]] #> [1] 10 #> toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } toml[[list(\"table\", \"b\", 1)]] #> [[1]] #> [1] 10 #>"},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":"the-lt-replacement-operator","dir":"Reference","previous_headings":"","what":"The [[<- replacement operator","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"[[<- operator works similarly combination ts_tree_select() ts_tree_update(), (also replacement function ts_tree_select<-()), might readable.                      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json[[list(\"b\", 1)]] <- 100 json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [100, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [10, 20, 30] #> 4 | c = { c1 = true, c2 = [] } toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } toml[[list(\"table\", \"b\", 1)]] <- 100 toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [100.0, 20, 30] #> 4 | c = { c1 = true, c2 = [] }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/double-bracket-ts-tree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Unserialize parts of a tree-sitter tree — [[.ts_tree","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}')  tree #> # jsonc (1 line) #> 1 | {\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}  tree[[list(\"a\")]] #> [[1]] #> [1] 13 #>   # Last two elements of \"b\" tree[[list(\"b\", -(1:2))]] #> [[1]] #> [1] 2 #>  #> [[2]] #> [1] 3 #>"},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":null,"dir":"Reference","previous_headings":"","what":"Format tree-sitter trees — format.ts_tree","title":"Format tree-sitter trees — format.ts_tree","text":"Format ts_tree object printing.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format tree-sitter trees — format.ts_tree","text":"","code":"# S3 method for class 'ts_tree' format(x, n = 10, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format tree-sitter trees — format.ts_tree","text":"x ts_tree object. n Number lines, number selections print. ... Currently ignored.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format tree-sitter trees — format.ts_tree","text":"Character vector lines print.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format tree-sitter trees — format.ts_tree","text":"engine print.ts_tree(), possibly useful obtain printed representation without actual printing. selected nodes tree, highlighted output. See \\code{\\link[ts:ts_tree_select]{ts_tree_select()}} select nodes tree. function openCity(evt, language) {   var currentTab = evt.srcElement.parentElement.parentElement;   var , x, tablinks;   x = currentTab.getElementsByClassName(\"ts-package\");   (= 0; < x.length; ++) {     x[].style.display = \"none\";   }   tablinks = currentTab.getElementsByClassName(\"tablink\");   (= 0; < x.length; ++) {     tablinks[].className = tablinks[].className.replace(\" w3-active\", \"\");   }   currentTab.getElementsByClassName(\"ts-package-\" + language)[0].style.display = \"block\";   evt.srcElement.className += \" w3-active\"; }  .w3-container:, .w3-container:, .w3-panel:, .w3-panel:, .w3-row:, .w3-row:, .w3-row-padding:, .w3-row-padding:, .w3-cell-row:, .w3-cell-row:, .w3-clear:, .w3-clear:, .w3-bar:, .w3-bar:{   content:\"\";   display: table;   clear: }.w3-container, .w3-panel {   padding: 0.01em 16px }.w3-panel {   margin-top: 16px;   margin-bottom: 16px }.w3-bar {   width: 100%;   overflow: hidden }.w3-center .w3-bar {   display: inline-block;   width: auto }.w3-bar .w3-bar-item {   padding: 8px 16px;   float: left;   width: auto;   border: none;   display: block;   outline: 0 }.w3-bar .w3-button {   white-space: normal;   border: 1px solid; }.w3-block {   display: block;   width: 100% }.w3-btn, .w3-button {   border: none;   display: inline-block;   padding: 8px 16px;   vertical-align: middle;   overflow: hidden;   text-decoration: none;   color: inherit;   background-color: inherit;   text-align: center;   cursor: pointer;   white-space: nowrap }.w3-btn, .w3-button{   -webkit-touch-callout: none;   -webkit-user-select: none;   -khtml-user-select: none;   -moz-user-select: none;   -ms-user-select: none;   user-select: none }.w3-bar .w3-button {   white-space: normal }.w3-button:hover {   color: #000!important;   background-color: #ccc!important }.w3-active, .w3-hover-active:hover {   background-color: #aaa;   color: #000; }.w3-border-0 {   border: 0!important }.w3-border {   border: 1px solid #ccc!important;   margin-bottom: 10px; }.w3-border-top {   border-top: 1px solid #ccc!important }.w3-border-bottom {   border-bottom: 1px solid #ccc!important }.w3-border-left {   border-left: 1px solid #ccc!important }.w3-border-right{   border-right: 1px solid #ccc!important }/* undo gradient tidytemplate, add whole tab */ .ts-package {   background-image: linear-gradient(-160deg, #f8f8f8 0, #f1f1f1 100%);   margin-bottom: 10px; } .ts-package pre, code {   background-image: none;   background-color: #00000000; }","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/format.ts_tree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format tree-sitter trees — format.ts_tree","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }' ) format(json) #> [1] \"\\033[90m# jsonc (1 line)\\033[39m\"                                                                            #> [2] \"\\033[90m1\\033[39m\\033[90m | \\033[39m{ \\\"a\\\": 1, \\\"b\\\": [10, 20, 30], \\\"c\\\": { \\\"c1\\\": true, \\\"c2\\\": 100 } }\""},{"path":"https://gaborcsardi.github.io/ts/reference/internal.html","id":null,"dir":"Reference","previous_headings":"","what":"Utility functions for ts language implementations (internal) — ts_collapse","title":"Utility functions for ts language implementations (internal) — ts_collapse","text":"functions packages implementing new parsers based ts package. unlikely need call functions directly.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/internal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Utility functions for ts language implementations (internal) — ts_collapse","text":"","code":"ts_collapse(   s,   sep = \", \",   sep2 = sub(\"^,\", \"\", last),   last = \", and \",   trunc = Inf,   width = Inf,   ellipsis = \"...\",   style = c(\"both-ends\", \"head\") )  ts_cnd(..., class = NULL, call = ts_caller_env(), .envir = parent.frame())  ts_caller_arg(arg)  as_ts_caller_arg(x)  # S3 method for class 'ts_caller_arg' as.character(x, ...)  ts_caller_env(n = 1)  ts_check_named_arg(arg, frame = -1)  ts_parse_error_cnd(tree, text, call = ts_caller_env())"},{"path":"https://gaborcsardi.github.io/ts/reference/internal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Utility functions for ts language implementations (internal) — ts_collapse","text":"s ts_collapse() character vector collapse. sep Separator string elements. sep2 Separator string two elements. last Separator string last element. trunc Integer, maximum number elements show truncation. width Integer, maximum display width collapsed string. collapsed string exceeds width, truncated ellipsis. ellipsis String indicate truncation. style Character, collapsing style use. Possible values \"-ends\" (default), shows first last elements truncating, \"head\", shows first elements. ... Arguments collapsed interpolated condition message. class character vector classes condition. call Environment call associate error condition, defaults caller's environment. .envir environment evaluate ... expressions, defaults parent frame. arg Argument check. x ts_caller_arg object. n Number frames go find caller environment. frame Frame number inspect, defaults caller's frame. tree ts_tree object returned ts_tree_new(). text Raw vector, original text used parse tree.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/internal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Utility functions for ts language implementations (internal) — ts_collapse","text":"ts_collapse() returns character scalar, collapsed string. ts_cnd() returns error condition object. ts_caller_arg() returns captured expression ts_caller_arg object. as_ts_caller_arg() returns ts_caller_arg object. .character.ts_caller_arg() returns short string representation caller argument, character scalar. ts_caller_env() returns environment, NULL called global environment. ts_check_named_arg() returns TRUE invisibly argument named, otherwise raises error. ts_parse_error_cnd() returns ts_parse_error condition","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/internal.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Utility functions for ts language implementations (internal) — ts_collapse","text":"ts_collapse() collapses character vector single string, options truncation number elements display width. useful creating informative error messages. ts_cnd() creates condition object. interpolates arguments single message. ts_caller_arg() captures expression used argument function, use error messages. as_ts_caller_arg() converts object caller argument object. useful referring parts caller argument downstream error messages. .character.ts_caller_arg() formats caller argument object short string use error messages. Multi-line expressions truncated first line. ts_caller_env() returns environment caller function, n levels call stack. useful associating error conditions correct call. ts_check_named_arg() checks whether argument supplied name. , raises error. ts_parse_error_cnd() creates parse error condition associated ts_tree object original text. error message includes information location parse errors text. also format() print() methods display error together relevant lines original text.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":null,"dir":"Reference","previous_headings":"","what":"Print a tree-sitter tree — print.ts_tree","title":"Print a tree-sitter tree — print.ts_tree","text":"Print ts_tree object screen.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print a tree-sitter tree — print.ts_tree","text":"","code":"# S3 method for class 'ts_tree' print(x, n = 10, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print a tree-sitter tree — print.ts_tree","text":"x ts_tree object print. n Number lines, number selections print. ... used currently.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print a tree-sitter tree — print.ts_tree","text":"Invisibly returns original ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Print a tree-sitter tree — print.ts_tree","text":"Calls format.ts_tree() format ts_tree object, writes formatted object standard output, returns original object invisibly.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/print.ts_tree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print a tree-sitter tree — print.ts_tree","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }' ) print(json) #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }"},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":null,"dir":"Reference","previous_headings":"","what":"Edit parts of a tree-sitter tree — select-set","title":"Edit parts of a tree-sitter tree — select-set","text":"ts_tree_select<-() replacement function works similarly combination ts_tree_select() ts_tree_update(), might readable.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Edit parts of a tree-sitter tree — select-set","text":"","code":"ts_tree_select(tree, ...) <- value"},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Edit parts of a tree-sitter tree — select-set","text":"tree ts_tree object returned ts_tree_new(). ... Selection expressions, see ts_tree_select(). value R expression serialize ts_tree_deleted().","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Edit parts of a tree-sitter tree — select-set","text":"ts_tree object selected parts updated. ts_tree_deleted() returns marker object used right hand side ts_tree_select<- double bracket replacement functions, see examples .","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Edit parts of a tree-sitter tree — select-set","text":"following two expressions equivalent:                 ts_tree_deleted() special marker delete elements ts_tree object ts_tree_select<- double bracket operator.","code":"tree <- ts_tree_select(tree, <selectors>) |> ts_tree_update(value) ts_tree_select(tree, <selectors>) <- value json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } ts_tree_select(json, \"b\", 1) <- 100 json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [100, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [10, 20, 30] #> 4 | c = { c1 = true, c2 = [] } toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } ts_tree_select(toml, \"table\", \"b\", 1) <- 100 toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [100.0, 20, 30] #> 4 | c = { c1 = true, c2 = [] }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/select-set.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Edit parts of a tree-sitter tree — select-set","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}') tree #> # jsonc (1 line) #> 1 | {\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}  ts_tree_select(tree, \"a\") <- 42 ts_tree_select(tree, \"b\", -1) <- ts_tree_deleted()  tree #> # jsonc (1 line) #> 1 | {\"a\": 42, \"b\": [1, 2], \"c\": \"x\"}"},{"path":"https://gaborcsardi.github.io/ts/reference/ts-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ts: Tree-Sitter Parsing Tools — ts-package","title":"ts: Tree-Sitter Parsing Tools — ts-package","text":"Common tree-sitter parsing tools R. meant used packages specialize particular languages.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ts: Tree-Sitter Parsing Tools — ts-package","text":"Maintainer: Gábor Csárdi csardi.gabor@gmail.com contributors: Posit Software, PBC (ROR) [copyright holder, funder]","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":null,"dir":"Reference","previous_headings":"","what":"List installed tree-sitter parsers — ts_list_parsers","title":"List installed tree-sitter parsers — ts_list_parsers","text":"ts package contains common interface several tree-sitter parsers, implemented R packages. ts_list_parsers() lists available parsers installed system.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List installed tree-sitter parsers — ts_list_parsers","text":"","code":"ts_list_parsers(lib_path = .libPaths())"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List installed tree-sitter parsers — ts_list_parsers","text":"lib_path Library paths search installed packages. Default base::.libPaths().","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List installed tree-sitter parsers — ts_list_parsers","text":"data frame columns: package: character, name package. version: character, version package. title: character, title package. library: character, library path package installed. loaded: logical, whether package currently loaded.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"List installed tree-sitter parsers — ts_list_parsers","text":"see tree-sitter parser packages available CRAN, installed system, see packages depend ts name 'ts' prefix. example includes tree-sitter parsers time:","code":"ts_list_parsers() #> # A data frame: 2 × 5 #>   package version    title           library                    loaded #> * <chr>   <chr>      <chr>           <chr>                      <lgl> #> 1 tsjsonc 0.0.0.9000 Edit JSON Files /Users/gaborcsardi/Librar… FALSE #> 2 tstoml  0.0.0.9000 Edit TOML files /Users/gaborcsardi/Librar… FALSE"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_list_parsers.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List installed tree-sitter parsers — ts_list_parsers","text":"","code":"ts_list_parsers() #> # A data frame: 2 × 5 #>   package version    title           library                     loaded #> * <chr>   <chr>      <chr>           <chr>                       <lgl>  #> 1 tsjsonc 0.0.0.9000 Edit JSON Files /home/runner/work/_temp/Li… TRUE   #> 2 tstoml  0.0.0.9000 Edit TOML files /home/runner/work/_temp/Li… TRUE"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert ts_tree object to a data frame — ts_tree-brackets","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"Create data frame syntax tree JSON document, indexing ts_tree object single brackets. occasionally useful exploration debugging.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"","code":"# S3 method for class 'ts_tree' x[i, j, drop = FALSE]"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"x ts_tree object. , j Incides, passed regular data.frame indexing method, see 'Extract'. drop Passed regular data.frame indexing method, see 'Extract'.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"data frame one row per token, columns: id: integer, id token. (root) document node id 1. parent: integer, id parent token. root token parent NA field_name: character, field name token parent. type: character, type token. code: character, actual code token. start_byte, end_byte: integer, byte positions token input. start_row, start_column, end_row, end_column: integer, position token input. is_missing: logical, whether token missing token added parser recover errors. has_error: logical, whether token parse error. children: list integer vectors, ids children tokens. dom_type: character, type node DOM tree. See ts_tree_dom(). Nodes part DOM tree NA_character_ . dom_children: list integer vectors, ids children DOM tree. See ts_tree_dom(). dom_parent: integer, parent node DOM tree. See ts_tree_dom(). Nodes part DOM tree document node NA_integer_ .","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"tree-sitter tree object least four classes: ts_tree_<parser_name>, e.g. ts_tree_tsjsonc, ts_tree, tbl, pillar package, better printing converted data frame, data.frame, since data frame internally. ts_tree class custom format() print() methods, show (part ) underlying document, also selected elements, . sometimes useful treat tree ts_tree object data frame, drop ts_tree classes. can done indexing single brackets, e.g. tree[]. returns data frame one row per token, various columns information tokens. See details 'Value' section page.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree-brackets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert ts_tree object to a data frame — ts_tree-brackets","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"foo\": 42, \"bar\": [1, 2, 3]}')  tree #> # jsonc (1 line) #> 1 | {\"foo\": 42, \"bar\": [1, 2, 3]}  tree[] #> # A data frame: 26 × 20 #>       id parent field_name type     code  start_byte end_byte start_row #>    <int>  <int> <chr>      <chr>    <chr>      <int>    <int>     <int> #>  1     1     NA NA         \"docume…  NA            0       29         0 #>  2     2      1 NA         \"object\"  NA            0       29         0 #>  3     3      2 NA         \"{\"      \"{\"            0        1         0 #>  4     4      2 NA         \"pair\"    NA            1       10         0 #>  5     5      4 key        \"string\"  NA            1        6         0 #>  6     6      5 NA         \"\\\"\"     \"\\\"\"           1        2         0 #>  7     7      5 NA         \"string… \"foo\"          2        5         0 #>  8     8      5 NA         \"\\\"\"     \"\\\"\"           5        6         0 #>  9     9      4 NA         \":\"      \":\"            6        7         0 #> 10    10      4 value      \"number\" \"42\"           8       10         0 #> # ℹ 16 more rows #> # ℹ 12 more variables: start_column <int>, end_row <int>, #> #   end_column <int>, is_missing <lgl>, has_error <lgl>, #> #   expected <list>, children <I<list>>, tws <chr>, #> #   dom_children <list>, dom_parent <int>, dom_name <chr>, #> #   dom_type <chr>"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":null,"dir":"Reference","previous_headings":"","what":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"ts_tree_ast() prints annotated syntax tree ts_tree object. syntax tree contains tree-sitter nodes, shows source code associated node, along line numbers.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"manual page ts_tree_ast() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"","code":"ts_tree_ast(tree)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"tree ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"Character vector, formatted annotated syntax tree, line line. class cli_tree, cli package. may contain ANSI escape sequences coloring hyperlinks.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"the-syntax-tree-and-the-dom-tree","dir":"Reference","previous_headings":"","what":"The syntax tree and the DOM tree","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"syntax tree contains nodes tree-sitter parse tree, including named unnamed nodes comments. E.g. JSON(C) document includes pairs, brackets, braces, commas, colons, double quotes string escape sequences separate nodes.  See ts::ts_tree_dom() tree shows semantic structure parsed document, may different syntax tree.            ","code":"tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") ts_tree_ast(tree) #> document (1)                   1| #> └─object (2)                    | #>   ├─{ (3)                       |{ #>   ├─pair (4)                    | #>   │ ├─string (5)                | #>   │ │ ├─\" (6)                   |  \" #>   │ │ ├─string_content (7)      |   a #>   │ │ └─\" (8)                   |    \" #>   │ ├─: (9)                     |     : #>   │ └─true (10)                 |       true #>   ├─, (11)                      |           , #>   ├─pair (12)                   | #>   │ ├─string (13)               | #>   │ │ ├─\" (14)                  |             \" #>   │ │ ├─string_content (15)     |              b #>   │ │ └─\" (16)                  |               \" #>   │ ├─: (17)                    |                : #>   │ └─array (18)                | #>   │   ├─[ (19)                  |                  [ #>   │   ├─number (20)             |                   1 #>   │   ├─, (21)                  |                    , #>   │   ├─number (22)             |                      2 #>   │   ├─, (23)                  |                       , #>   │   ├─number (24)             |                         3 #>   │   └─] (25)                  |                          ] #>   └─} (26)                      |                            } ts_tree_dom(tree) #> document (1) #> └─object (2) #>   ├─true (10) # a #>   └─array (18) # b #>     ├─number (20) #>     ├─number (22) #>     └─number (24)"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_ast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Show the annotated syntax tree of a tree-sitter tree — ts_tree_ast","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"foo\": 42, \"bar\": [1, 2, 3]}')  tree #> # jsonc (1 line) #> 1 | {\"foo\": 42, \"bar\": [1, 2, 3]}  ts_tree_ast(tree) #> document (1)                   1| #> └─object (2)                    | #>   ├─{ (3)                       |{ #>   ├─pair (4)                    | #>   │ ├─string (5)                | #>   │ │ ├─\" (6)                   | \" #>   │ │ ├─string_content (7)      |  foo #>   │ │ └─\" (8)                   |     \" #>   │ ├─: (9)                     |      : #>   │ └─number (10)               |        42 #>   ├─, (11)                      |          , #>   ├─pair (12)                   | #>   │ ├─string (13)               | #>   │ │ ├─\" (14)                  |            \" #>   │ │ ├─string_content (15)     |             bar #>   │ │ └─\" (16)                  |                \" #>   │ ├─: (17)                    |                 : #>   │ └─array (18)                | #>   │   ├─[ (19)                  |                   [ #>   │   ├─number (20)             |                    1 #>   │   ├─, (21)                  |                     , #>   │   ├─number (22)             |                       2 #>   │   ├─, (23)                  |                        , #>   │   ├─number (24)             |                          3 #>   │   └─] (25)                  |                           ] #>   └─} (26)                      |                            }  ts_tree_dom(tree) #> document (1) #> └─object (2) #>   ├─number (10) # foo #>   └─array (18) # bar #>     ├─number (20) #>     ├─number (22) #>     └─number (24)  # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   title = \"TOML Example\"   [owner]   name = \"Tom Preston-Werner\"   dob = 1979-05-27T07:32:00-08:00 )\")  tree #> # toml (5 lines) #> 1 |  #> 2 |   title = \"TOML Example\" #> 3 |   [owner] #> 4 |   name = \"Tom Preston-Werner\" #> 5 |   dob = 1979-05-27T07:32:00-08:00  ts_tree_ast(tree) #> document (1)                           1| #> ├─pair (2)                             2| #> │ ├─bare_key (3)                        |  title #> │ ├─= (4)                               |        = #> │ └─string (5)                          | #> │   └─basic_string (6)                  | #> │     ├─\" (7)                           |          \" #> │     ├─basic_string_content (8)        |           TOML Example #> │     └─\" (9)                           |                       \" #> └─table (10)                           3| #>   ├─[ (11)                              |  [ #>   ├─bare_key (12)                       |   owner #>   ├─] (13)                              |        ] #>   ├─pair (14)                          4| #>   │ ├─bare_key (15)                     |  name #>   │ ├─= (16)                            |       = #>   │ └─string (17)                       | #>   │   └─basic_string (18)               | #>   │     ├─\" (19)                        |         \" #>   │     ├─basic_string_content (20)     |          Tom Preston-Werner #>   │     └─\" (21)                        |                            \" #>   └─pair (22)                          5| #>     ├─bare_key (23)                     |  dob #>     ├─= (24)                            |      = #>     └─offset_date_time (25)             |        1979-05-27T07:32:00-08:00  ts_tree_dom(tree) #> document (1) #> ├─value (5) # title #> └─table (10) # owner #>   ├─value (17) # name #>   └─value (25) # dob"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":null,"dir":"Reference","previous_headings":"","what":"Delete selected elements from a tree-sitter tree — ts_tree_delete","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"Use ts_tree_select() select elements deleted, call ts_tree_delete() remove tree.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"manual page ts_tree_delete() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"","code":"ts_tree_delete(tree, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"tree ts_tree object. ... Extra arguments methods.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"modified ts_tree object selected elements removed.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"formatting rest document left .     tree selection, tree corresponding empty document returned, .e. whole content deleted.   tree selection, empty selection, tree returned unchanged.   parsers support comments, deleting elements include comments typically delete comments well. comments kept . See details manual specific parser.    ","code":"jsonc <- tsjsonc::ts_parse_jsonc(   \"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\" ) |>   ts::ts_tree_format() jsonc #> # jsonc (8 lines) #> 1 | { #> 2 |     \"a\": true, #> 3 |     \"b\": [ #> 4 |         1, #> 5 |         2, #> 6 |         3 #> 7 |     ] #> 8 | } jsonc |> ts_tree_select(\"a\") |> ts_tree_delete() #> # jsonc (7 lines) #> 1 | { #> 2 |     \"b\": [ #> 3 |         1, #> 4 |         2, #> 5 |         3 #> 6 |     ] #> 7 | } jsonc <- tsjsonc::ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") jsonc |> ts_tree_delete() #> # jsonc (0 lines) jsonc <- tsjsonc::ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") jsonc |> ts_tree_select(\"c\") |> ts_tree_delete() #> # jsonc (1 line) #> 1 | { \"a\": true, \"b\": [1, 2, 3] } jsonc <- tsjsonc::ts_parse_jsonc(   \"// top comment\\n{ \\\"a\\\": // comment\\n  true,\\n \\\"b\\\": [1, 2, 3] }\" ) |> ts::ts_tree_format() jsonc #> # jsonc (11 lines) #>  1 | // top comment #>  2 | { #>  3 |     \"a\": #>  4 |         // comment #>  5 |         true, #>  6 |     \"b\": [ #>  7 |         1, #>  8 |         2, #>  9 |         3 #> 10 |     ] #> ℹ 1 more line #> ℹ Use `print(n = ...)` to see more lines jsonc |> ts_tree_select(\"a\") |> ts_tree_delete() #> # jsonc (8 lines) #> 1 | // top comment #> 2 | { #> 3 |     \"b\": [ #> 4 |         1, #> 5 |         2, #> 6 |         3 #> 7 |     ] #> 8 | }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_delete.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Delete selected elements from a tree-sitter tree — ts_tree_delete","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc(   \"{ \\\"a\\\": //comment\\ntrue, \\\"b\\\": [1, 2, 3] }\" )  tree #> # jsonc (2 lines) #> 1 | { \"a\": //comment #> 2 | true, \"b\": [1, 2, 3] }  tree |> ts_tree_select(\"a\") #> # jsonc (2 lines, 1 selected element) #> > 1 | { \"a\": //comment #>   2 | true, \"b\": [1, 2, 3] }  tree |> ts_tree_select(\"a\") |> ts_tree_delete() #> # jsonc (1 line) #> 1 | { \"b\": [1, 2, 3] } # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   [servers]   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" }   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" } )\")  tree #> # toml (4 lines) #> 1 |  #> 2 |   [servers] #> 3 |   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" } #> 4 |   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" }  tree |> ts_tree_select(\"servers\", TRUE, \"dc\") #> # toml (4 lines, 2 selected elements) #>   1 |  #>   2 |   [servers] #> > 3 |   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" } #> > 4 |   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" } tree |> ts_tree_select(\"servers\", TRUE, \"dc\") |> ts_tree_delete() #> # toml (3 lines) #> 1 | [servers] #> 2 |   alpha = { ip = \"127.0.0.1\" } #> 3 |   beta = { ip = \"127.0.0.2\" }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":null,"dir":"Reference","previous_headings":"","what":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"ts_tree_dom() prints document object model (DOM) tree ts_tree object. tree includes semantic elements. E.g. JSON(C) document includes objects, arrays various value types, syntax elements like brackets, commas colons.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"manual page ts_tree_dom() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"","code":"ts_tree_dom(tree)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"tree ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"Character vector, formatted annotated syntax tree, line line. class cli_tree, cli package. may contain ANSI escape sequences coloring hyperlinks.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"the-syntax-tree-and-the-dom-tree","dir":"Reference","previous_headings":"","what":"The syntax tree and the DOM tree","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"See ts_tree_ast() complete tree-sitter syntax tree includes nodes, including syntax elements like brackets commas.            ","code":"tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") ts_tree_ast(tree) #> document (1)                   1| #> └─object (2)                    | #>   ├─{ (3)                       |{ #>   ├─pair (4)                    | #>   │ ├─string (5)                | #>   │ │ ├─\" (6)                   |  \" #>   │ │ ├─string_content (7)      |   a #>   │ │ └─\" (8)                   |    \" #>   │ ├─: (9)                     |     : #>   │ └─true (10)                 |       true #>   ├─, (11)                      |           , #>   ├─pair (12)                   | #>   │ ├─string (13)               | #>   │ │ ├─\" (14)                  |             \" #>   │ │ ├─string_content (15)     |              b #>   │ │ └─\" (16)                  |               \" #>   │ ├─: (17)                    |                : #>   │ └─array (18)                | #>   │   ├─[ (19)                  |                  [ #>   │   ├─number (20)             |                   1 #>   │   ├─, (21)                  |                    , #>   │   ├─number (22)             |                      2 #>   │   ├─, (23)                  |                       , #>   │   ├─number (24)             |                         3 #>   │   └─] (25)                  |                          ] #>   └─} (26)                      |                            } ts_tree_dom(tree) #> document (1) #> └─object (2) #>   ├─true (10) # a #>   └─array (18) # b #>     ├─number (20) #>     ├─number (22) #>     └─number (24)"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_dom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print the document object model (DOM) of a tree-sitter tree — ts_tree_dom","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"foo\": 42, \"bar\": [1, 2, 3]}')  tree #> # jsonc (1 line) #> 1 | {\"foo\": 42, \"bar\": [1, 2, 3]}  ts_tree_ast(tree) #> document (1)                   1| #> └─object (2)                    | #>   ├─{ (3)                       |{ #>   ├─pair (4)                    | #>   │ ├─string (5)                | #>   │ │ ├─\" (6)                   | \" #>   │ │ ├─string_content (7)      |  foo #>   │ │ └─\" (8)                   |     \" #>   │ ├─: (9)                     |      : #>   │ └─number (10)               |        42 #>   ├─, (11)                      |          , #>   ├─pair (12)                   | #>   │ ├─string (13)               | #>   │ │ ├─\" (14)                  |            \" #>   │ │ ├─string_content (15)     |             bar #>   │ │ └─\" (16)                  |                \" #>   │ ├─: (17)                    |                 : #>   │ └─array (18)                | #>   │   ├─[ (19)                  |                   [ #>   │   ├─number (20)             |                    1 #>   │   ├─, (21)                  |                     , #>   │   ├─number (22)             |                       2 #>   │   ├─, (23)                  |                        , #>   │   ├─number (24)             |                          3 #>   │   └─] (25)                  |                           ] #>   └─} (26)                      |                            }  ts_tree_dom(tree) #> document (1) #> └─object (2) #>   ├─number (10) # foo #>   └─array (18) # bar #>     ├─number (20) #>     ├─number (22) #>     └─number (24)  # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   title = \"TOML Example\"   [owner]   name = \"Tom Preston-Werner\"   dob = 1979-05-27T07:32:00-08:00 )\")  tree #> # toml (5 lines) #> 1 |  #> 2 |   title = \"TOML Example\" #> 3 |   [owner] #> 4 |   name = \"Tom Preston-Werner\" #> 5 |   dob = 1979-05-27T07:32:00-08:00  ts_tree_ast(tree) #> document (1)                           1| #> ├─pair (2)                             2| #> │ ├─bare_key (3)                        |  title #> │ ├─= (4)                               |        = #> │ └─string (5)                          | #> │   └─basic_string (6)                  | #> │     ├─\" (7)                           |          \" #> │     ├─basic_string_content (8)        |           TOML Example #> │     └─\" (9)                           |                       \" #> └─table (10)                           3| #>   ├─[ (11)                              |  [ #>   ├─bare_key (12)                       |   owner #>   ├─] (13)                              |        ] #>   ├─pair (14)                          4| #>   │ ├─bare_key (15)                     |  name #>   │ ├─= (16)                            |       = #>   │ └─string (17)                       | #>   │   └─basic_string (18)               | #>   │     ├─\" (19)                        |         \" #>   │     ├─basic_string_content (20)     |          Tom Preston-Werner #>   │     └─\" (21)                        |                            \" #>   └─pair (22)                          5| #>     ├─bare_key (23)                     |  dob #>     ├─= (24)                            |      = #>     └─offset_date_time (25)             |        1979-05-27T07:32:00-08:00  ts_tree_dom(tree) #> document (1) #> ├─value (5) # title #> └─table (10) # owner #>   ├─value (17) # name #>   └─value (25) # dob"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":null,"dir":"Reference","previous_headings":"","what":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"(Re)format selected elements document represented tree-sitter tree, tree-sitter parser supports formatting.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"manual page ts_tree_format() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"","code":"ts_tree_format(tree, options, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"tree ts_tree object. options list options formatting.  See details manual specific parser. ... Extra arguments methods.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"ts_tree object reformatted document.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"tree selection, whole document formatted.   tree empty selection, returned unchanged.   parsers support options customize formatting. See details manual specific parser.    ","code":"jsonc <- tsjsonc::ts_parse_jsonc(\"{ \\\"a\\\": [1,2,3] }\") jsonc |> ts_tree_format() #> # jsonc (7 lines) #> 1 | { #> 2 |     \"a\": [ #> 3 |         1, #> 4 |         2, #> 5 |         3 #> 6 |     ] #> 7 | } jsonc <- tsjsonc::ts_parse_jsonc(\"{ \\\"a\\\": [1,2,3] }\") jsonc |> ts_tree_select(\"c\") |> ts_tree_format() #> # jsonc (1 line) #> 1 | { \"a\": [1,2,3] } jsonc <- tsjsonc::ts_parse_jsonc(\"{ \\\"a\\\": [1,2,3] }\") |>   ts_tree_format() jsonc |> ts_tree_select(TRUE) |>   ts_tree_format(options = list(format = \"oneline\")) #> # jsonc (3 lines) #> 1 | { #> 2 |     \"a\": [ 1, 2, 3 ] #> 3 | }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_format.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format the selected elements of a tree sitter tree for printing — ts_tree_format","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{ \"a\":true, \"b\": [1,2,3] }') tree #> # jsonc (1 line) #> 1 | { \"a\":true, \"b\": [1,2,3] }  # Format whole document tree |> ts_tree_format() #> # jsonc (8 lines) #> 1 | { #> 2 |     \"a\": true, #> 3 |     \"b\": [ #> 4 |         1, #> 5 |         2, #> 6 |         3 #> 7 |     ] #> 8 | }  # Format each top element under the document node in one line tree |> ts_tree_format() |>   ts_tree_select(TRUE) |>   ts_tree_format(options = list(format = \"oneline\")) #> # jsonc (4 lines) #> 1 | { #> 2 |     \"a\": true, #> 3 |     \"b\": [ 1, 2, 3 ] #> 4 | }  # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   [servers]   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" }   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" } )\")  tree #> # toml (4 lines) #> 1 |  #> 2 |   [servers] #> 3 |   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" } #> 4 |   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" }  tree |> ts_tree_format() #> # toml (3 lines) #> 1 | [servers] #> 2 | alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" } #> 3 | beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":null,"dir":"Reference","previous_headings":"","what":"Insert a new element into a tree-sitter tree — ts_tree_insert","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"Insert new element selected element.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"manual page ts_tree_insert() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"","code":"ts_tree_insert(tree, new, key, at, options, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"tree ts_tree object. new new element insert.  type new depends parser method implements insertion. See details manual specific parser. key key new element, inserting keyed element.  example JSON(C) object TOML table keyed elements. position insert new element .  interpretation argument depends method implements insertion. Typically followings supported: 0 inserts beginning. Inf inserts end. positive integer n inserts n-th element. character scalar inserts element given key, keyed elements. See details manual specific parser. options list options insertion.  See details manual specific parser. ... Extra arguments methods.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"always possible insert new element selected element. example JSONC document can insert new element array object, scalar elements. insertion possible, error raised.   tree selection, new element inserted top level.   tree empty selection, returned unchanged, .e. new element inserted.  ","code":"json <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") json |> ts_tree_select(\"a\") |> ts_tree_insert(\"foo\") #>   Cannot insert into a 'true' JSON element. Can only insert into 'array' and 'ob #> ject' elements and empty JSON documents. json <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") json |> ts_tree_insert(key = \"c\", new = \"foo\") #> # jsonc (9 lines) #> 1 | { #> 2 |     \"a\": true, #> 3 |     \"b\": [ #> 4 |         1, #> 5 |         2, #> 6 |         3 #> 7 |     ], #> 8 |     \"c\": \"foo\" #> 9 | } json <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") json |> ts_tree_select(\"nonexistent\") |> ts_tree_insert(\"foo\") #> # jsonc (1 line, 0 selected elements) #> 1 | { \"a\": true, \"b\": [1, 2, 3] }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_insert.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Insert a new element into a tree-sitter tree — ts_tree_insert","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{ \"a\": true, \"b\": [1, 2, 3] }')  tree |> ts_tree_select(\"b\") |> ts_tree_insert(4, at = Inf) #> # jsonc (6 lines) #> 1 | { \"a\": true, \"b\": [ #> 2 |     1, #> 3 |     2, #> 4 |     3, #> 5 |     4 #> 6 | ] }  # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   [servers]   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" }   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" } )\")  tree |>   ts_tree_select(\"servers\", TRUE) |>   ts_tree_insert(key = \"active\", TRUE) #> # toml (3 lines) #> 1 | [servers] #> 2 |   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\", active = true } #> 3 |   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\", active = true }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_mark_selection1.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","title":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","text":"function packages implementing new parsers based ts package. unlikely need call function directly.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_mark_selection1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","text":"","code":"ts_tree_mark_selection1(tree, node)  # S3 method for class 'ts_tree' ts_tree_mark_selection1(tree, node)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_mark_selection1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","text":"tree Tree-sitter tree. node Node id, integer scalar.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_mark_selection1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","text":"Integer vector node ids highlight.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_mark_selection1.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Helper function to decide which AST nodes to highlight for a selection (internal) — ts_tree_mark_selection1","text":"parsers AST nodes correspond one--one DOM nodes useful highlight multiple AST nodes single selected DOM node. generic function can overridden parsers return multiple AST node ids single selected (DOM) node id. default implementation simply returns input node id.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":null,"dir":"Reference","previous_headings":"","what":"Create tree-sitter tree from file or string — ts_tree_new","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"main function create tree-sitter parse tree, using ts parser implemented another package. result ts_tree object. ts_tree object may queried, edited, formatted, written file, etc. using ts_tree methods.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"","code":"ts_tree_new(   language,   file = NULL,   text = NULL,   ranges = NULL,   fail_on_parse_error = TRUE,   ... )"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"language Language file string, ts_language object,e.g. return value tsjsonc::ts_language_jsonc(). file Path file parse. Use either file text, . text String parse. Use either file text, . ranges Can used parse part(s) input. must data frame integer columns start_row, start_col, end_row, end_col, start_byte, end_byte, order. fail_on_parse_error Logical, whether error parse errors document. Default TRUE. ... Additional arguments methods.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"ts_tree object representing parse tree input. can use single bracket `[` operator convert data frame.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"package implements tree-sitter parser provides function creates ts_language object parser. E.g. tsjsonc tsjsonc::ts_language_jsonc(). need use returned ts_language object language argument ts_tree_new().  function openCity(evt, language) {   var currentTab = evt.srcElement.parentElement.parentElement;   var , x, tablinks;   x = currentTab.getElementsByClassName(\"ts-package\");   (= 0; < x.length; ++) {     x[].style.display = \"none\";   }   tablinks = currentTab.getElementsByClassName(\"tablink\");   (= 0; < x.length; ++) {     tablinks[].className = tablinks[].className.replace(\" w3-active\", \"\");   }   currentTab.getElementsByClassName(\"ts-package-\" + language)[0].style.display = \"block\";   evt.srcElement.className += \" w3-active\"; }  .w3-container:, .w3-container:, .w3-panel:, .w3-panel:, .w3-row:, .w3-row:, .w3-row-padding:, .w3-row-padding:, .w3-cell-row:, .w3-cell-row:, .w3-clear:, .w3-clear:, .w3-bar:, .w3-bar:{   content:\"\";   display: table;   clear: }.w3-container, .w3-panel {   padding: 0.01em 16px }.w3-panel {   margin-top: 16px;   margin-bottom: 16px }.w3-bar {   width: 100%;   overflow: hidden }.w3-center .w3-bar {   display: inline-block;   width: auto }.w3-bar .w3-bar-item {   padding: 8px 16px;   float: left;   width: auto;   border: none;   display: block;   outline: 0 }.w3-bar .w3-button {   white-space: normal;   border: 1px solid; }.w3-block {   display: block;   width: 100% }.w3-btn, .w3-button {   border: none;   display: inline-block;   padding: 8px 16px;   vertical-align: middle;   overflow: hidden;   text-decoration: none;   color: inherit;   background-color: inherit;   text-align: center;   cursor: pointer;   white-space: nowrap }.w3-btn, .w3-button{   -webkit-touch-callout: none;   -webkit-user-select: none;   -khtml-user-select: none;   -moz-user-select: none;   -ms-user-select: none;   user-select: none }.w3-bar .w3-button {   white-space: normal }.w3-button:hover {   color: #000!important;   background-color: #ccc!important }.w3-active, .w3-hover-active:hover {   background-color: #aaa;   color: #000; }.w3-border-0 {   border: 0!important }.w3-border {   border: 1px solid #ccc!important;   margin-bottom: 10px; }.w3-border-top {   border-top: 1px solid #ccc!important }.w3-border-bottom {   border-bottom: 1px solid #ccc!important }.w3-border-left {   border-left: 1px solid #ccc!important }.w3-border-right{   border-right: 1px solid #ccc!important }/* undo gradient tidytemplate, add whole tab */ .ts-package {   background-image: linear-gradient(-160deg, #f8f8f8 0, #f1f1f1 100%);   margin-bottom: 10px; } .ts-package pre, code {   background-image: none;   background-color: #00000000; }","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_new.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create tree-sitter tree from file or string — ts_tree_new","text":"","code":"# JSONC example, needs the tsjsonc package ----------------------------- json <- ts_tree_new(   tsjsonc::ts_language_jsonc(),   text = '{ \"a\": 1, \"b\": 2 }' )  json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": 2 }  json |> ts_tree_format() #> # jsonc (4 lines) #> 1 | { #> 2 |     \"a\": 1, #> 3 |     \"b\": 2 #> 4 | }  # TOML example, needs the tstoml package ------------------------------- toml <- ts_tree_new(   tstoml::ts_language_toml(),   text = '[section]\\nkey = \"value\"\\nnumber = 42\\n' )  toml #> # toml (3 lines) #> 1 | [section] #> 2 | key = \"value\" #> 3 | number = 42  toml |> ts_tree_format() #> # toml (3 lines) #> 1 | [section] #> 2 | key = \"value\" #> 3 | number = 42"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":null,"dir":"Reference","previous_headings":"","what":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"Use  tree-sitter's query language find nodes tree-sitter tree.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"manual page ts_tree_query() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"","code":"ts_tree_query(tree, query)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"tree ts_tree object. query Character string, tree-sitter query run.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"list entries patterns matched_captures. patterns contains information patterns queries data frame columns: id, name, pattern, match_count. matched_captures contains information matches, columns id, pattern, match, start_byte, end_byte, start_row, start_column, end_row, end_column, name, code. pattern column matched_captured refers id column patterns.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"probably need know details specific tree-sitter parser using, write effective queries. See documentation parser package using details node types query language support. See links .  ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }' ) json |> ts_tree_query(\"(number) @number\") #> $patterns #> # A data frame: 1 × 4 #>      id name  pattern              match_count #>   <int> <chr> <chr>                      <int> #> 1     1 NA    \"(number) @number\\n\"           5 #> #> $captures #> # A data frame: 1 × 2 #>      id name #>   <int> <chr> #> 1     1 number #> #> $matched_captures #> # A data frame: 5 × 12 #>      id pattern match type  start_byte end_byte start_row start_column #>   <int>   <int> <int> <chr>      <int>    <int>     <int>        <int> #> 1     1       1     1 numb…          7        8         0            7 #> 2     1       1     2 numb…         16       18         0           16 #> 3     1       1     3 numb…         20       22         0           20 #> 4     1       1     4 numb…         24       26         0           24 #> 5     1       1     5 numb…         54       57         0           54 #> # ℹ 4 more variables: end_row <int>, end_column <int>, name <chr>, #> #   code <chr> #>"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_query.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run tree-sitter queries on tree-sitter trees — ts_tree_query","text":"","code":"# Select all numbers in a JSONC document ------------------------------------ json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }' ) json |> ts_tree_query(\"(number) @number\") #> $patterns #> # A data frame: 1 × 4 #>      id name  pattern              match_count #>   <int> <chr> <chr>                      <int> #> 1     1 NA    \"(number) @number\\n\"           5 #>  #> $captures #> # A data frame: 1 × 2 #>      id name   #>   <int> <chr>  #> 1     1 number #>  #> $matched_captures #> # A data frame: 5 × 12 #>      id pattern match type   start_byte end_byte start_row start_column #>   <int>   <int> <int> <chr>       <int>    <int>     <int>        <int> #> 1     1       1     1 number          7        8         0            7 #> 2     1       1     2 number         16       18         0           16 #> 3     1       1     3 number         20       22         0           20 #> 4     1       1     4 number         24       26         0           24 #> 5     1       1     5 number         54       57         0           54 #> # ℹ 4 more variables: end_row <int>, end_column <int>, name <chr>, #> #   code <chr> #>"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":null,"dir":"Reference","previous_headings":"","what":"Select elements of a tree-sitter tree — ts_tree_select","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"function heart ts. edit tree-sitter tree, first need select parts want delete update.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"manual page ts_tree_select() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"","code":"ts_tree_select(tree, ..., refine = FALSE)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"tree ts_tree object returned ts_tree_new(). ... Selection expressions, see details. refine Logical, whether refine current selection start new selection.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"ts_tree object selected parts.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"selection process iterative. Selection expressions (selectors) applied one one, selector selects nodes currently selected nodes. selector, applied individually currently selected node, results concatenated. selection process starts root DOM tree, document node (see ts_tree_dom()), unless refine = TRUE set, case starts current selection. See various types selection expressions .","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"all-elements-true","dir":"Reference","previous_headings":"","what":"All elements: TRUE","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"Selects child nodes current nodes.      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(c(\"b\", \"c\"), TRUE) #> # jsonc (1 line, 5 selected elements) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml('   a = 1   b = [10, 20, 30]   [c]   c1 = true   c2 = [] ') toml |> ts_tree_select(c(\"b\", \"c\"), TRUE) #> # toml (6 lines, 5 selected elements) #>   1 |  #>   2 |   a = 1 #> > 3 |   b = [10, 20, 30] #>   4 |   [c] #> > 5 |   c1 = true #> > 6 |   c2 = []"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"specific-keys-character-vector","dir":"Reference","previous_headings":"","what":"Specific keys: character vector","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"Selects child nodes given names nodes named children. node named children, selects nothing node.      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(c(\"a\", \"c\"), c(\"c1\")) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml('   a = 1   b = [10, 20, 30]   [c]   c1 = true   c2 = [] ') toml |> ts_tree_select(c(\"a\", \"c\"), \"c1\") #> # toml (6 lines, 1 selected element) #>   2 |   a = 1 #>   3 |   b = [10, 20, 30] #>   4 |   [c] #> > 5 |   c1 = true #>   6 |   c2 = []"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"by-position-integer-vector","dir":"Reference","previous_headings":"","what":"By position: integer vector","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"Selects child nodes position. Positive indices count start, negative indices count end. Zero indices allowed.   JSONC positional indices can used arrays objects. nodes nothing selected.      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(c(\"b\", \"c\"), -1) #> # jsonc (1 line, 2 selected elements) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml('   a = 1   b = [10, 20, 30]   [c]   c1 = true   c2 = [] ') toml |> ts_tree_select(c(\"b\", \"c\"), -1) #> # toml (6 lines, 2 selected elements) #>   1 |  #>   2 |   a = 1 #> > 3 |   b = [10, 20, 30] #>   4 |   [c] #>   5 |   c1 = true #> > 6 |   c2 = []"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"matching-keys-regular-expression","dir":"Reference","previous_headings":"","what":"Matching keys: regular expression","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"character scalar named regex can used select child nodes whose names match given regular expression, nodes named children. node named children, selects nothing node.      ","code":"json <- tsjsonc::ts_parse_jsonc(  '{ \"apple\": 1, \"almond\": 2, \"banana\": 3, \"cherry\": 4 }' ) json |> ts_tree_select(regex = \"^a\") #> # jsonc (1 line, 2 selected elements) #> > 1 | { \"apple\": 1, \"almond\": 2, \"banana\": 3, \"cherry\": 4 } toml <- tstoml::ts_parse_toml(  'apple = 1\\nalmond = 2\\nbanana = 3\\ncherry = 4\\n' ) toml |> ts_tree_select(regex = \"^a\") #> # toml (4 lines, 2 selected elements) #> > 1 | apple = 1 #> > 2 | almond = 2 #>   3 | banana = 3 #>   4 | cherry = 4"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"tree-sitter-query-matches","dir":"Reference","previous_headings":"","what":"Tree sitter query matches","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"character scalar named query can used select nodes matching tree-sitter query. See ts_tree_query() details tree-sitter queries.  Instead character scalar can also two-element list, first element query string second element character vector capture names select. case nodes matching given capture names selected.   See ts_language_jsonc() details JSONC grammar.  example selects numbers JSON document.      See tstoml::ts_language_toml() details TOML grammar.  example selects integers TOML document.   ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } }' ) json |> ts_tree_select(query = \"(number) @number\") #> # jsonc (1 line, 5 selected elements) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": 100 } } toml <- tstoml::ts_parse_toml(   'a = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = 100 }\\n' ) toml |> ts_tree_select(query = \"(integer) @integer\") #> # toml (3 lines, 5 selected elements) #> > 1 | a = 1 #> > 2 | b = [10, 20, 30] #> > 3 | c = { c1 = true, c2 = 100 }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"explicit-node-ids","dir":"Reference","previous_headings":"","what":"Explicit node ids","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"can use (c(...)) select nodes ids directly. advanced use cases .              ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) ts_tree_dom(json) #> document (1) #> └─object (2) #>   ├─number (10) # a #>   ├─array (18) # b #>   │ ├─number (20) #>   │ ├─number (22) #>   │ └─number (24) #>   └─object (33) # c #>     ├─true (41) # c1 #>     └─null (49) # c2 json |> ts_tree_select(I(18)) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   'a = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) ts_tree_dom(toml) #> document (1) #> ├─value (5) # a #> ├─array (9) # b #> │ ├─value (11) #> │ ├─value (13) #> │ └─value (15) #> └─inline_table (20) # c #>   ├─value (25) # c1 #>   └─array (30) # c2 toml |> ts_tree_select(I(9)) #> # toml (3 lines, 1 selected element) #>   1 | a = 1 #> > 2 | b = [10, 20, 30] #>   3 | c = { c1 = true, c2 = [] }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"refining-selections","dir":"Reference","previous_headings":"","what":"Refining selections","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"refine argument ts_tree_select() TRUE, selection starts already selected elements (simultanously), instead starting document element.                      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json <- json |> ts_tree_select(c(\"b\", \"c\")) json |> ts_tree_select(1:2) #> # jsonc (1 line, 2 selected elements) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json |> ts_tree_select(1:2, refine = TRUE) #> # jsonc (1 line, 4 selected elements) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml <- toml |> ts_tree_select(\"table\", \"b\") # selects the first two elements in the document node, ie. \"table\" toml |> ts_tree_select(1:2) #> # toml (4 lines, 1 selected element) #> > 1 | [table] #> > 2 | a = 1 #> > 3 | b = [10, 20, 30] #> > 4 | c = { c1 = true, c2 = [] } # selects the first two elements inside \"table\" and \"b\" toml |> ts_tree_select(1:2, refine = TRUE) #> # toml (4 lines, 2 selected elements) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"the-ts-tree-select-lt-replacement-function","dir":"Reference","previous_headings":"","what":"The ts_tree_select<-() replacement function","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"ts_tree_select<-() replacement function works similarly combination ts_tree_select() ts_tree_update(), might readable.                      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } ts_tree_select(json, \"b\", 1) <- 100 json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [100, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [10, 20, 30] #> 4 | c = { c1 = true, c2 = [] } toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } ts_tree_select(toml, \"table\", \"b\", 1) <- 100 toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [100.0, 20, 30] #> 4 | c = { c1 = true, c2 = [] }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"the-and-lt-operators","dir":"Reference","previous_headings":"","what":"The [[ and [[<- operators","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"[[ operator works similarly combination ts_tree_select() ts_tree_unserialize(), might readable.                  [[<- operator works similarly combination ts_tree_select() ts_tree_update(), (also replacement function ts_tree_select<-()), might readable.                      ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json[[list(\"b\", 1)]] #> [[1]] #> [1] 10 #> toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } toml[[list(\"table\", \"b\", 1)]] #> [[1]] #> [1] 10 #> json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json[[list(\"b\", 1)]] <- 100 json #> # jsonc (1 line) #> 1 | { \"a\": 1, \"b\": [100, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [10, 20, 30] #> 4 | c = { c1 = true, c2 = [] } toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } toml[[list(\"table\", \"b\", 1)]] <- 100 toml #> # toml (4 lines) #> 1 | [table] #> 2 | a = 1 #> 3 | b = [100.0, 20, 30] #> 4 | c = { c1 = true, c2 = [] }"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select elements of a tree-sitter tree — ts_tree_select","text":"","code":"# ---------------------------------------------------------------------- # Create a JSONC tree, needs the tsjsonc package json <- ts_tree_new(   tsjsonc::ts_language_jsonc(),   text = '{ \"a\": 1, \"b\": 2, \"c\": { \"d\": 3, \"e\": 4 } }' )  json |> ts_tree_select(\"c\", \"d\") #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": 2, \"c\": { \"d\": 3, \"e\": 4 } }  # ---------------------------------------------------------------------- # Create a TOML tree, needs the tstoml package toml <- ts_tree_new(   tstoml::ts_language_toml(),   text = tstoml::toml_example_text() )  toml |> ts_tree_select(\"servers\", TRUE, \"ip\") #> # toml (23 lines, 2 selected elements) #>   ...    #>   15  | [servers] #>   16  |  #>   17  | [servers.alpha] #> > 18  | ip = \"10.0.0.1\" #>   19  | role = \"frontend\" #>   20  |  #>   21  | [servers.beta] #> > 22  | ip = \"10.0.0.2\" #>   23  | role = \"backend\""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":null,"dir":"Reference","previous_headings":"","what":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"function packages implementing new parsers based ts package. unlikely need call function directly.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"","code":"ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.ts_tree_selector_default' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.NULL' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.ts_tree_selector_ids' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.ts_tree_selector_tsquery' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.character' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.integer' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.numeric' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.ts_tree_selector_regex' ts_tree_select1(tree, node, slt)  # S3 method for class 'ts_tree.logical' ts_tree_select1(tree, node, slt)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"tree ts_tree object returned ts_tree_new(). node Integer scalar, node id select . slt selector object, see details ts_tree_select().","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"parser package may implement methods generic change behavior ts_tree_select() certain selector type, even add new selector types. new method named   ts package implement deault methods selector types described ts_tree_select() manual page.","code":"ts_tree_select.<ts_tree_class>.<selector_class>"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"ts-tree-selector-default-selector","dir":"Reference","previous_headings":"","what":"ts_tree_selector_default selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.ts_tree_selector_default method used select default element(s), selected element. E.g. starting new selection root DOM tree. default implementation returns ids children document root AST, except comments. children, returns id document root AST (always id 1).","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"null-selector","dir":"Reference","previous_headings":"","what":"NULL selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.NULL method used  NULL selector, supposed clear selection. probably need override method. default implementation returns empty integer vector.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"ts-tree-selector-ids-selector","dir":"Reference","previous_headings":"","what":"ts_tree_selector_ids selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.ts_tree_selector_ids method used select nodes ids directly. probably need override method. default implementation returns ids stored selector.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"behaviour may change future select nodes subtree current node.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"ts-tree-selector-tsquery-selector","dir":"Reference","previous_headings":"","what":"ts_tree_selector_tsquery selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.ts_tree_selector_tsquery method used select nodes matching tree-sitter query. probably need override method. default implementation returns ids stored selector.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"note-1","dir":"Reference","previous_headings":"","what":"Note","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"behaviour may change future select nodes subtree current node.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"character-character-vector-selector","dir":"Reference","previous_headings":"","what":"character (character vector) selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.character method used selector character vector. default implementation selects DOM children node whose names character vector. children o node named, returns empty integer vector. (E.g. JSONC document returns empty integer vector nodes array.)","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"integer-integer-vector-selector","dir":"Reference","previous_headings":"","what":"integer (integer vector) selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.integer method used selector integer vector. default implementation selects DOM children node position. Positive indices count start, negative indices count end. Zero indices allowed error raised used.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"numeric-numeric-double-vector-selector","dir":"Reference","previous_headings":"","what":"numeric (numeric, double vector) selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.numeric method used selector numeric (double) vector. currrently coerces numeric vector integer calls integer method.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"ts-tree-selector-regex-regular-expression-selector","dir":"Reference","previous_headings":"","what":"ts_tree_selector_regex (regular expression) selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.ts_tree_selector_regex method used selector regular expression. default implementation selects DOM children node whose names match regular expression. children o node named, returns empty integer vector. (E.g. JSONC document returns empty integer vector nodes array.)","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_select1.html","id":"logical-logical-vector-selector","dir":"Reference","previous_headings":"","what":"logical (logical vector) selector","title":"Select nodes from a tree-sitter tree (internal) — ts_tree_select1","text":"Method: ts_tree_select1.ts_tree.logical method used selector logical vector. default implementation supports scalar TRUE, selects DOM children node. values raise error.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_selection.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","title":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","text":"functions packages implementing new parsers based ts package. unlikely need call functions directly.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_selection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","text":"","code":"ts_tree_selection(tree, default = TRUE)  ts_tree_selected_nodes(tree, default = TRUE)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_selection.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","text":"tree ts_tree object returned ts_tree_new(). default Logical, whether return default selection explicit selection, NULL.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_selection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","text":"ts_tree_selection() returns list selection records. ts_tree_selected_nodes() returns ids currently selected nodes.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_selection.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Helper functions for tree-sitter tree selections (internal) — ts_tree_selection","text":"ts_tree_selection() returns current selection, list selectors. ts_tree_selected_nodes() returns ids currently selected nodes.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":null,"dir":"Reference","previous_headings":"","what":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"Show structure tree-sitter tree S-expression.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"manual page ts_tree_sexpr() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"","code":"ts_tree_sexpr(tree)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"tree ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"string representing S-expression syntax tree.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"function returns nested list representation syntax tree, node represented list type children.","code":""},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_sexpr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Show the syntax tree of a tree-sitter tree — ts_tree_sexpr","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc(   \"{ \\\"a\\\": //comment\\ntrue, \\\"b\\\": [1, 2, 3] }\" )  ts_tree_sexpr(tree) #> [1] \"(document (object (pair key: (string (string_content)) (comment) value: (true)) (pair key: (string (string_content)) value: (array (number) (number) (number)))))\"  # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   [servers]   alpha = { ip = \"127.0.0.1\", dc = \"eqdc10\" }   beta = { ip = \"127.0.0.2\", dc = \"eqdc20\" } )\")  ts_tree_sexpr(tree) #> [1] \"(document (table (bare_key) (pair (bare_key) (inline_table (pair (bare_key) (string (basic_string (basic_string_content)))) (pair (bare_key) (string (basic_string (basic_string_content)))))) (pair (bare_key) (inline_table (pair (bare_key) (string (basic_string (basic_string_content)))) (pair (bare_key) (string (basic_string (basic_string_content))))))))\""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":null,"dir":"Reference","previous_headings":"","what":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"Unserialize selected elements ts_tree object, .e. convert R objects.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"available-tree-sitter-parsers","dir":"Reference","previous_headings":"","what":"Available tree-sitter parsers","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"manual page ts_tree_unserialize() S3 generic function. Methods parser packages may override generic. ones see links manual pages table.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"","code":"ts_tree_unserialize(tree)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"tree ts_tree object.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"elements selected tree, whole document unserialized.     tree empty selection, empty list returned.    ","code":"tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") ts_tree_unserialize(tree) #> [[1]] #> [[1]]$a #> [1] TRUE #> #> [[1]]$b #> [[1]]$b[[1]] #> [1] 1 #> #> [[1]]$b[[2]] #> [1] 2 #> #> [[1]]$b[[3]] #> [1] 3 #> #> #> tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") tree |> ts_tree_select(\"nope\") |> ts_tree_unserialize() #> list()"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"the-operator","dir":"Reference","previous_headings":"","what":"The [[ operator","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"[[ operator works similarly combination ts_tree_select() ts_tree_unserialize(), might readable.              ","code":"json <- tsjsonc::ts_parse_jsonc(   '{ \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } }' ) json |> ts_tree_select(\"b\", 1) #> # jsonc (1 line, 1 selected element) #> > 1 | { \"a\": 1, \"b\": [10, 20, 30], \"c\": { \"c1\": true, \"c2\": null } } json[[list(\"b\", 1)]] #> [[1]] #> [1] 10 #> toml <- tstoml::ts_parse_toml(   '[table]\\na = 1\\nb = [10, 20, 30]\\nc = { c1 = true, c2 = [] }\\n' ) toml |> ts_tree_select(\"table\", \"b\", 1) #> # toml (4 lines, 1 selected element) #>   1 | [table] #>   2 | a = 1 #> > 3 | b = [10, 20, 30] #>   4 | c = { c1 = true, c2 = [] } toml[[list(\"table\", \"b\", 1)]] #> [[1]] #> [1] 10 #>"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_unserialize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Unserialize selected elements of a tree-sitter tree — ts_tree_unserialize","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}')  tree #> # jsonc (1 line) #> 1 | {\"a\": 13, \"b\": [1, 2, 3], \"c\": \"x\"}  tree |> ts_tree_select(c(\"b\", \"c\")) |> ts_tree_unserialize() #> [[1]] #> [[1]][[1]] #> [1] 1 #>  #> [[1]][[2]] #> [1] 2 #>  #> [[1]][[3]] #> [1] 3 #>  #>  #> [[2]] #> [1] \"x\" #>   tree |> ts_tree_select(\"b\") |> ts_tree_unserialize() #> [[1]] #> [[1]][[1]] #> [1] 1 #>  #> [[1]][[2]] #> [1] 2 #>  #> [[1]][[3]] #> [1] 3 #>  #>"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"Replace selected elements new element.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"","code":"ts_tree_update(tree, new, options, ...)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"tree ts_tree object. new new element replace selected elements .  type new depends parser method implements insertion. See details manual specific parser. options list options update.  See details manual specific parser. ... Extra arguments methods.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"modified ts_tree object selected elements replaced new element.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"tree selection, new element replaces whole document.   tree empty selection, new element inserted position selected elements .  ","code":"tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") tree |> ts_tree_update(as.list(4:6)) #> # jsonc (5 lines) #> 1 | [ #> 2 |   4, #> 3 |   5, #> 4 |   6 #> 5 | ] tree <- ts_parse_jsonc(\"{ \\\"a\\\": true, \\\"b\\\": [1, 2, 3] }\") tree |> ts_tree_select(\"new\") |> ts_tree_update(as.list(4:6)) #> # jsonc (13 lines) #>  1 | { #>  2 |     \"a\": true, #>  3 |     \"b\": [ #>  4 |         1, #>  5 |         2, #>  6 |         3 #>  7 |     ], #>  8 |     \"new\": [ #>  9 |         4, #> 10 |         5, #> ℹ 3 more lines #> ℹ Use `print(n = ...)` to see more lines"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_update.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace selected elements with a new element in a tree-sitter tree — ts_tree_update","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc(r\"(   {     \"name\": \"example\",     \"version\": \"1.0.0\",     \"dependencies\": {       \"tsjsonc\": \"^0.1.0\"     }   } )\")  tree |> ts_tree_select(\"version\") |> ts_tree_update(\"2.0.0\") #> # jsonc (8 lines) #> 1 |  #> 2 |   { #> 3 |     \"name\": \"example\", #> 4 |     \"version\": \"2.0.0\", #> 5 |     \"dependencies\": { #> 6 |       \"tsjsonc\": \"^0.1.0\" #> 7 |     } #> 8 |   } # Create a parse tree with tstoml -------------------------------------- tree <- tstoml::ts_parse_toml(r\"(   [package]   name = \"example\"   version = \"1.0.0\"   depdendencies = { tstoml = \"0.1.0\" } )\")  tree |> ts_tree_select(\"package\", \"version\") |> ts_tree_update(\"2.0.0\") #> # toml (4 lines) #> 1 | [package] #> 2 |   name = \"example\" #> 3 |   version = \"2.0.0\" #> 4 |   depdendencies = { tstoml = \"0.1.0\" }"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":null,"dir":"Reference","previous_headings":"","what":"Write a tree-sitter tree to a file — ts_tree_write","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"Writes document ts ts_tree object file connection.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"","code":"ts_tree_write(tree, file = NULL)"},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"tree ts_tree object returned ts_tree_new(). file Character string, connection, NULL. file connection write . default writes file used ts_tree_new(), tree read file.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"Invisibly returns NULL.","code":""},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"tree created file, ts_tree_write() default writes back file. Otherwise, file argument must specified.   write connection, pass connection object file argument. connection opened binary mode, raw bytes written using base::writeBin(). Otherwise, raw bytes converted characters using system encoding writing using base::rawToChar(). Use file = stdout() write standard output, .e. console interactive R session.   function openCity(evt, language) {   var currentTab = evt.srcElement.parentElement.parentElement;   var , x, tablinks;   x = currentTab.getElementsByClassName(\"ts-package\");   (= 0; < x.length; ++) {     x[].style.display = \"none\";   }   tablinks = currentTab.getElementsByClassName(\"tablink\");   (= 0; < x.length; ++) {     tablinks[].className = tablinks[].className.replace(\" w3-active\", \"\");   }   currentTab.getElementsByClassName(\"ts-package-\" + language)[0].style.display = \"block\";   evt.srcElement.className += \" w3-active\"; }  .w3-container:, .w3-container:, .w3-panel:, .w3-panel:, .w3-row:, .w3-row:, .w3-row-padding:, .w3-row-padding:, .w3-cell-row:, .w3-cell-row:, .w3-clear:, .w3-clear:, .w3-bar:, .w3-bar:{   content:\"\";   display: table;   clear: }.w3-container, .w3-panel {   padding: 0.01em 16px }.w3-panel {   margin-top: 16px;   margin-bottom: 16px }.w3-bar {   width: 100%;   overflow: hidden }.w3-center .w3-bar {   display: inline-block;   width: auto }.w3-bar .w3-bar-item {   padding: 8px 16px;   float: left;   width: auto;   border: none;   display: block;   outline: 0 }.w3-bar .w3-button {   white-space: normal;   border: 1px solid; }.w3-block {   display: block;   width: 100% }.w3-btn, .w3-button {   border: none;   display: inline-block;   padding: 8px 16px;   vertical-align: middle;   overflow: hidden;   text-decoration: none;   color: inherit;   background-color: inherit;   text-align: center;   cursor: pointer;   white-space: nowrap }.w3-btn, .w3-button{   -webkit-touch-callout: none;   -webkit-user-select: none;   -khtml-user-select: none;   -moz-user-select: none;   -ms-user-select: none;   user-select: none }.w3-bar .w3-button {   white-space: normal }.w3-button:hover {   color: #000!important;   background-color: #ccc!important }.w3-active, .w3-hover-active:hover {   background-color: #aaa;   color: #000; }.w3-border-0 {   border: 0!important }.w3-border {   border: 1px solid #ccc!important;   margin-bottom: 10px; }.w3-border-top {   border-top: 1px solid #ccc!important }.w3-border-bottom {   border-bottom: 1px solid #ccc!important }.w3-border-left {   border-left: 1px solid #ccc!important }.w3-border-right{   border-right: 1px solid #ccc!important }/* undo gradient tidytemplate, add whole tab */ .ts-package {   background-image: linear-gradient(-160deg, #f8f8f8 0, #f1f1f1 100%);   margin-bottom: 10px; } .ts-package pre, code {   background-image: none;   background-color: #00000000; }","code":"tree <- tsjsonc::ts_read_jsonc(\"config.json\") tree |> ts_tree_format() |> ts_tree_write()"},{"path":[]},{"path":"https://gaborcsardi.github.io/ts/reference/ts_tree_write.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Write a tree-sitter tree to a file — ts_tree_write","text":"","code":"# Create a parse tree with tsjsonc ------------------------------------- tree <- tsjsonc::ts_parse_jsonc('{\"foo\": 42, \"bar\": [1, 2, 3]}')  # Format and write to file tree |> ts_tree_format() |> ts_tree_write(\"example.json\")"}]
